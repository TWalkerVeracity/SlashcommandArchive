javascript:!function(){"use strict";function t(e,o=document){let r=[];return o.querySelectorAll(e).forEach(t=>r.push(t)),o.querySelectorAll("*").forEach(o=>{o.shadowRoot&&r.push(...t(e,o.shadowRoot))}),r}async function e(t,e=20){for(let o=0;o<e;o++){if(t.shadowRoot)return!0;await new Promise(t=>setTimeout(t,100))}return!1}async function o(t){if(!t.shadowRoot){let o=await e(t);if(!o)return console.warn("[QueryEditor] Shadow DOM not found for:",t),!1}let r=t.getAttribute("component-id")||t.getAttribute("now-id")||Math.random().toString(36).substring(2,9),n=`query-editor-btn-${r}`;if(t.shadowRoot.querySelector(`#${n}`))return console.log("[QueryEditor] Button already exists for:",r),!1;let i=document.createElement("now-button");i.id=n,i.setAttribute("icon","pencil-fill"),i.setAttribute("variant","secondary"),i.setAttribute("size","md"),i.setAttribute("label","Edit Query"),i.setAttribute("style","margin: 8px 0; min-width: 120px;"),i.addEventListener("click",()=>{let e=t.encodedQuery||"",o=prompt("Enter new encoded query:",e);null!==o&&(t.encodedQuery=o,t.dispatchEvent(new CustomEvent("query-updated",{detail:{oldQuery:e,newQuery:o}})),console.log("[QueryEditor] Query updated:",o))});let d=t.shadowRoot.querySelector("div, section, header, .content, .body, .form-group");return d?d.insertBefore(i,d.firstChild):t.shadowRoot.firstChild?t.shadowRoot.insertBefore(i,t.shadowRoot.firstChild):t.shadowRoot.appendChild(i),!0}!async function(){console.log("[QueryEditor] Searching for condition builders...");let e=function e(o){let r=[];return r.push(...t(o,document)),document.querySelectorAll("iframe").forEach(e=>{try{e.contentDocument&&r.push(...t(o,e.contentDocument))}catch(n){console.warn("[QueryEditor] Cannot access iframe:",e,n)}}),r}("now-condition-builder-connected");if(console.log("[QueryEditor] Found:",e),0===e.length){alert("No condition builders found.\n\nMake sure you are on a UI Builder page with condition builders.\n\nCheck console for details.");return}console.log(`[QueryEditor] Processing ${e.length} condition builder(s)...`);let r=0;for(let n of e)await o(n)&&r++}()}();